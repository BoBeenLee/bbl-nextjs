<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/3e6c1aa411866932.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3e6c1aa411866932.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-7135e0df0a574ef7.js" defer=""></script><script src="/_next/static/chunks/framework-1fd26beea2266a9c.js" defer=""></script><script src="/_next/static/chunks/main-bc0a66fe688b422e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6be9f9164444c95e.js" defer=""></script><script src="/_next/static/chunks/29107295-614f421318575cb3.js" defer=""></script><script src="/_next/static/chunks/252f366e-59abf35e2786e0d3.js" defer=""></script><script src="/_next/static/chunks/777cf710-033a7588d255869d.js" defer=""></script><script src="/_next/static/chunks/625-489138f3f9887ae7.js" defer=""></script><script src="/_next/static/chunks/542-1a7bb5b69a0c3b81.js" defer=""></script><script src="/_next/static/chunks/688-b2e5ad7c66e21d0e.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bid%5D-591f0f64b2dd22f3.js" defer=""></script><script src="/_next/static/JEE-K2PFB-3KKZ8PQQws7/_buildManifest.js" defer=""></script><script src="/_next/static/JEE-K2PFB-3KKZ8PQQws7/_ssgManifest.js" defer=""></script><script src="/_next/static/JEE-K2PFB-3KKZ8PQQws7/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.2.0">.jOTiqD{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;background-color:#F1F1F1;height:300px;}/*!sc*/
@media (max-width:767px){.jOTiqD{height:200px;}}/*!sc*/
data-styled.g1[id="Footer__Root-gZujhK"]{content:"jOTiqD,"}/*!sc*/
.igGzNO{grid-column:1;grid-row:2;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;padding:40px;color:#999;font-size:12px;}/*!sc*/
data-styled.g2[id="Footer__CopyrightBox-dJaEQU"]{content:"igGzNO,"}/*!sc*/
.imHKUi{grid-column:2;grid-row:2;padding:40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}/*!sc*/
data-styled.g3[id="Footer__ContactBox-fJuIuJ"]{content:"imHKUi,"}/*!sc*/
.klZXkn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g4[id="Footer__ContactColumn-huzhaG"]{content:"klZXkn,"}/*!sc*/
.lbTHgz{margin-right:10px;}/*!sc*/
data-styled.g5[id="Footer__ContactColumnOne-iJRdWK"]{content:"lbTHgz,"}/*!sc*/
.fqFAb{color:#333333;padding:0 0;}/*!sc*/
.fqFAb:hover{color:#0074e5;}/*!sc*/
data-styled.g6[id="Footer__ContactItemBox-erPsVA"]{content:"fqFAb,"}/*!sc*/
.cBqtUa{border-radius:50%;}/*!sc*/
data-styled.g7[id="Avatar__Root-cEegIm"]{content:"cBqtUa,"}/*!sc*/
.iXEUZc{padding:10px 0;}/*!sc*/
data-styled.g8[id="MenuItem__Root-hMknsR"]{content:"iXEUZc,"}/*!sc*/
.gpvtaa{color:#333333;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.gpvtaa:hover{color:#0074e5;}/*!sc*/
data-styled.g10[id="MenuItem__MenuLinkText-eXtHVp"]{content:"gpvtaa,"}/*!sc*/
.ciZjWj{width:100%;border:1px solid #F1F1F1;}/*!sc*/
data-styled.g11[id="Seperator__Root-jDoLGS"]{content:"ciZjWj,"}/*!sc*/
.eaRzl #menu{top:0;}/*!sc*/
data-styled.g12[id="Menu__Root-buQhrY"]{content:"eaRzl,"}/*!sc*/
.cONIJZ{display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;height:6em;}/*!sc*/
data-styled.g13[id="Menu__HeaderBox-dChqxo"]{content:"cONIJZ,"}/*!sc*/
.dQFKIN{display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-top:20px;}/*!sc*/
data-styled.g14[id="Menu__ContentBox-ctDgDO"]{content:"dQFKIN,"}/*!sc*/
.bAyvQD{border-width:2px;}/*!sc*/
data-styled.g15[id="Menu__BottomSeparator-VJBPE"]{content:"bAyvQD,"}/*!sc*/
.hnIqcL .headroom-transform-none .headroom{-webkit-transform:none !important;-ms-transform:none !important;transform:none !important;}/*!sc*/
data-styled.g16[id="Header__RootWrapper-iBNipD"]{content:"hnIqcL,"}/*!sc*/
.fwVnGB{display:grid;grid-template-columns:auto 1fr auto;height:6em;position:relative;}/*!sc*/
@media (min-width:1220px){.fwVnGB{grid-template-columns:1fr 1fr 1fr;}}/*!sc*/
data-styled.g17[id="Header__Root-gcmapU"]{content:"fwVnGB,"}/*!sc*/
.hNAzJh{grid-column:2;display:grid;grid-template-columns:30% repeat(4,1fr);grid-template-rows:auto;}/*!sc*/
@media (min-width:1220px){.hNAzJh{width:1220px;}}/*!sc*/
data-styled.g18[id="Header__HeaderTitle-Bbqyd"]{content:"hNAzJh,"}/*!sc*/
.gsnWQo{grid-column:1;padding:0 20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
data-styled.g19[id="Header__Logo-bEjJxB"]{content:"gsnWQo,"}/*!sc*/
.dAwVvC{width:45px;height:45px;}/*!sc*/
data-styled.g20[id="Header__LogoLink-fTiEmh"]{content:"dAwVvC,"}/*!sc*/
.cYjsky{width:45px;height:45px;}/*!sc*/
data-styled.g21[id="Header__IconBox-rEegk"]{content:"cYjsky,"}/*!sc*/
.crSpIC{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g22[id="Header__TitleBox-dwCqLL"]{content:"crSpIC,"}/*!sc*/
.kJpSAq{padding:0.5em;color:#333333;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}/*!sc*/
.kJpSAq:hover{color:#0074e5;}/*!sc*/
@media (max-width:767px){.kJpSAq{display:none;}}/*!sc*/
data-styled.g24[id="Header__TitleText-krfBvn"]{content:"kJpSAq,"}/*!sc*/
.dYQPrn{grid-column:3;position:relative;display:none;width:100px;}/*!sc*/
@media (max-width:767px){.dYQPrn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}/*!sc*/
data-styled.g25[id="Header__MenuBox-hyNMHM"]{content:"dYQPrn,"}/*!sc*/
.GeYzL{position:absolute;bottom:0;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g26[id="Header__SeperatorBottomBox-jEucSp"]{content:"GeYzL,"}/*!sc*/
.hCqTAE{width:100%;overflow:hidden;}/*!sc*/
data-styled.g27[id="Header__SeperatorBottom-knHmqQ"]{content:"hCqTAE,"}/*!sc*/
.ejrjpk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:100%;height:50px;background-color:#fff;border-top:1px solid #F1F1F1;z-index:10;position:fixed;bottom:0;}/*!sc*/
data-styled.g28[id="BottomPopup__Root-YYaNu"]{content:"ejrjpk,"}/*!sc*/
.fosGdn{height:100%;}/*!sc*/
data-styled.g33[id="Layout__Root-hBGQzl"]{content:"fosGdn,"}/*!sc*/
.hiGyoW{display:grid;grid-template-areas:"header" "content" "footer";grid-template-columns:1fr;grid-template-rows:auto 1fr auto;height:100%;}/*!sc*/
data-styled.g34[id="Layout__ContainerBox-ixByoZ"]{content:"hiGyoW,"}/*!sc*/
.gVIODV{grid-area:header;}/*!sc*/
data-styled.g35[id="Layout__HeaderBox-jAlZut"]{content:"gVIODV,"}/*!sc*/
.jHYtQP{grid-area:content;margin:0 auto;padding:20px 20px;width:100%;}/*!sc*/
@media (max-width:767px){.jHYtQP{width:1px;min-width:100%;}}/*!sc*/
@media (min-width:1220px){.jHYtQP{max-width:1220px;}}/*!sc*/
data-styled.g36[id="Layout__ContentBox-cifBnX"]{content:"jHYtQP,"}/*!sc*/
.eoFKAx{grid-area:footer;}/*!sc*/
data-styled.g37[id="Layout__FooterBox-kWPHHf"]{content:"eoFKAx,"}/*!sc*/
.llrteH{display:none;color:#EC483F;}/*!sc*/
data-styled.g38[id="Layout__StatePopupBox-dMYOfn"]{content:"llrteH,"}/*!sc*/
.cVemHD{font-size:30px;font-weight:400;color:#767676;}/*!sc*/
data-styled.g39[id="SubTitle__Root-gEhMib"]{content:"cVemHD,"}/*!sc*/
.jNsTEZ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:15px 0;}/*!sc*/
data-styled.g42[id="SocialLinks__Root-jSZdCn"]{content:"jNsTEZ,"}/*!sc*/
.beAchF{width:10px;height:100%;}/*!sc*/
data-styled.g43[id="SocialLinks__Seperator-jaEcYQ"]{content:"beAchF,"}/*!sc*/
.ikwstD{margin-top:50px;}/*!sc*/
data-styled.g44[id="Caption__Root-eSAclV"]{content:"ikwstD,"}/*!sc*/
.kpJGQX{width:150px;float:right;}/*!sc*/
data-styled.g45[id="Caption__SocialLinkBox-eHpFGZ"]{content:"kpJGQX,"}/*!sc*/
.cFlzKi{padding:60px 50px 70px 50px;line-height:1.5;}/*!sc*/
.cFlzKi a{color:#0074e5;}/*!sc*/
@media (max-width:767px){.cFlzKi{padding:30px 10px 40px 10px;}}/*!sc*/
data-styled.g46[id="post__Root-iJivsf"]{content:"cFlzKi,"}/*!sc*/
.ifGelo{font-size:30px;margin-bottom:20px;color:#333333;font-weight:bold;}/*!sc*/
data-styled.g47[id="post__SubTitleBox-kHZOKA"]{content:"ifGelo,"}/*!sc*/
</style></head><body><div id="__next" data-reactroot=""><div id="outer-container" class="Layout__Root-hBGQzl fosGdn"><div class="BottomPopup__Root-YYaNu ejrjpk Layout__StatePopupBox-dMYOfn llrteH"><span>Your computer seems to be offline. We&#x27;ll keep trying, but there may be a problem with your connection.</span></div><div class="Layout__ContainerBox-ixByoZ hiGyoW"><header class="Layout__HeaderBox-jAlZut gVIODV"><div class="Header__RootWrapper-iBNipD hnIqcL"><div class="headroom-transform-none headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:1;-webkit-transform:translate3D(0, 0, 0);-ms-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0);background-color:#fff" class="headroom headroom--unfixed"><div class="Header__Root-gcmapU fwVnGB"><div class="Header__HeaderTitle-Bbqyd hNAzJh"><div class="Header__Logo-bEjJxB gsnWQo"><img src="https://avatars0.githubusercontent.com/u/1489321?v=4" alt="bobeenlee" class="Avatar__Root-cEegIm cBqtUa Header__IconBox-rEegk cYjsky"/></div><div class="Header__TitleBox-dwCqLL crSpIC"><span class="Header__TitleText-krfBvn kJpSAq">Home</span></div><div class="Header__TitleBox-dwCqLL crSpIC"><span class="Header__TitleText-krfBvn kJpSAq">About</span></div><div class="Header__TitleBox-dwCqLL crSpIC"><span class="Header__TitleText-krfBvn kJpSAq">Portfolio</span></div><div class="Header__TitleBox-dwCqLL crSpIC"><span class="Header__TitleText-krfBvn kJpSAq">Post</span></div></div><div class="Header__MenuBox-hyNMHM dYQPrn"><div class="Menu__Root-buQhrY eaRzl"><div><div class="bm-overlay" style="position:fixed;z-index:1000;width:100%;height:100%;background:rgba(0, 0, 0, 0.3);opacity:0;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:opacity 0.3s, transform 0s 0.3s;top:0;left:0"></div><div id="menu" class="bm-menu-wrap" style="position:fixed;right:0;z-index:1100;width:300px;height:100%;-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);-webkit-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);transition:all 0.5s"><div class="bm-menu" style="height:100%;box-sizing:border-box;overflow:auto;top:0;background:#fff"><nav class="bm-item-list" style="height:100%;color:#b8b7ad"><div class="Menu__HeaderBox-dChqxo cONIJZ bm-item" style="display:block" tabindex="-1"><div class="Seperator__Root-jDoLGS ciZjWj Menu__BottomSeparator-VJBPE bAyvQD"></div></div><div class="Menu__ContentBox-ctDgDO dQFKIN bm-item" style="display:block" tabindex="-1"><div class="MenuItem__Root-hMknsR iXEUZc"><span class="MenuItem__MenuLinkText-eXtHVp gpvtaa">Home</span></div><div class="MenuItem__Root-hMknsR iXEUZc"><span class="MenuItem__MenuLinkText-eXtHVp gpvtaa">About</span></div><div class="MenuItem__Root-hMknsR iXEUZc"><span class="MenuItem__MenuLinkText-eXtHVp gpvtaa">Portfolio</span></div><div class="MenuItem__Root-hMknsR iXEUZc"><span class="MenuItem__MenuLinkText-eXtHVp gpvtaa">Post</span></div></div></nav></div><div><div class="bm-cross-button" style="position:absolute;width:12px;height:12px;right:8px;top:8px"><span style="position:absolute;top:6px;right:14px"><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(45deg);background:#bdc3c7"></span><span class="bm-cross" style="position:absolute;width:3px;height:14px;transform:rotate(-45deg);background:#bdc3c7"></span></span><button style="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer" tabindex="-1">Close Menu</button></div></div></div><div><div class="bm-burger-button" style="z-index:1000;position:relative;width:20px;height:15px"><span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:0%;opacity:1;background:#333333"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:40%;opacity:1;background:#333333"></span><span class="bm-burger-bars" style="position:absolute;height:20%;left:0;right:0;top:80%;opacity:1;background:#333333"></span></span><button style="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;border:none;font-size:0;background:transparent;cursor:pointer">Open Menu</button></div></div></div></div></div><div class="Header__SeperatorBottomBox-jEucSp GeYzL"><div class="Seperator__Root-jDoLGS ciZjWj Header__SeperatorBottom-knHmqQ hCqTAE"></div></div></div></div></div></div></header><main id="page-box" class="Layout__ContentBox-cifBnX jHYtQP"><div class="post__Root-iJivsf cFlzKi"><div class="SubTitle__Root-gEhMib cVemHD post__SubTitleBox-kHZOKA ifGelo">React prod, staging, dev 환경 설정하기</div><div><p>React prod, staging, dev 환경 설정하기</p>
<p><a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#adding-custom-environment-variables">crn</a>, <a href="https://movie.naver.com/movie/bi/mi/basic.nhn?code=115622">crna</a>에서 외부 환경 설정을 추가하는 방법에 대해 다룬다.
prod, dev환경 별 환경변수를 받으러면
crn같은 경우 기본적으로 <a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#what-other-env-files-can-be-used">.env.local, .env.development, .env.production, .env.test</a>을 제공해주는거 같고
crna는 각 환경에 따른 환경 설정을 하려면 <a href="https://github.com/luggit/react-native-config">react native config</a>나 <a href="https://github.com/zetachang/react-native-dotenv">react native dotenv</a>(.env만 사용가능함)를 이용할 수 있겠다.</p>
<p>만일 staging 환경을 추가하고 싶다라는 고민에서 기본적으로 제공하는 문서로는 다루기가 힘든다라는 것을 알고 다른 방안을 찾아보게 되었다.</p>
<ul>
<li>React App</li>
</ul>
<p><a href="https://github.com/BoBeenLee/environment-config-example/blob/react/package.json">package.json</a></p>
<pre><code>...
 "scripts": {
    "start": "cp ./.env.dev ./.env &#x26;&#x26; react-scripts start",
    "start:staging": "cp ./.env.staging ./.env &#x26;&#x26; react-scripts start",
    "start:production": "cp ./.env.prod ./.env &#x26;&#x26; react-scripts start",
  }
...
</code></pre>
<p>스크립트 단에서 실행방법을 나누고 cp로 .env에 복사 후 각 환경별로 환경변수를 받고 실행하는 방법이다. 
내가 발견한 것들 중에 가장 깔끔한? 방법인거 같고 코드에 영향도도 가장 적고 관리하는데 가장 좋은 방법이라 생각한다.</p>
<ul>
<li>React Native App</li>
</ul>
<p><a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/package.json">package.json</a></p>
<pre><code>...
"scripts": {
    "start": "./scripts/pre-build.sh development &#x26;&#x26; react-native-scripts start",
    "start:staging": "./scripts/pre-build.sh staging &#x26;&#x26; react-native-scripts start",
    "start:production": "./scripts/pre-build.sh production &#x26;&#x26; react-native-scripts start",
  },
...
</code></pre>
<p>react native는 쉘 스크립트를 이용한 관리 방법이다.
<a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/scripts/pre-build.sh">pre-build.sh</a>는 환경별로 REACT_NATIVE_ENV키 값을 생성하여 <a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/config.json">config.json</a>에 덮어씌운다.
그리고 <a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/environment.js">environment.js</a>을 만들어 환경별 필요한 변수들을 세팅하여 전달한다.</p>
<h3>dotenv나 config라이브러리를 사용하지 않았던 이유</h3>
<ul>
<li>react native config
물론 getting started 보고 설정하면 원활히 동작할 수 있겠지만 관리 측면에서 react native config 호환도 유지해야한다는 점에 오히려 불편하다는 걸 알게되었다. 그런 이유로 사용하지 않았던거같다.</li>
<li>dotenv
crn은 내부적으로 설정 되어있지만 한정적인 설정밖에 안되어 이용하기 불편했던거같다. (ex) .env.staging 설정) 
react native dotenv는 <a href="https://github.com/zetachang/react-native-dotenv">.env만 사용가능</a>하여 제외 대상이었다.
물론 아래와 같은 식으로 환경변수를 .env에 전달 받는 방법도 있겠다.
.env</li>
</ul>
<pre><code>REACT_ENV=$REACT_ENV
</code></pre>
<p>package.json</p>
<pre><code>"scripts": {
	"start": "REACT_ENV=staging &#x26;&#x26; react-scripts start"
}
</code></pre>
<p>다만 react native에는 OS 환경에 환경변수 설정 후 appcenter환경에서 빌드 시엔 정상적으로 인식을 못했던거같다. ( react-native-dotenv의 이슈인지 정확히 모르겠지만 )</p>
<p>환경별 환경변수 설정은 다양한 방법이 존재하겠지만 아직까진 위와 같은 방법이 가장 심플한 경험을 받았다.
각 환경별 환경변수 설정 Example을 공유한다.</p>
<p>React</p>
<ul>
<li><a href="https://github.com/BoBeenLee/environment-config-example/tree/react">https://github.com/BoBeenLee/environment-config-example/tree/react</a></li>
</ul>
<p>React Native</p>
<ul>
<li><a href="https://github.com/BoBeenLee/environment-config-example/tree/react-native">https://github.com/BoBeenLee/environment-config-example/tree/react-native</a></li>
</ul>
<p>Node</p>
<ul>
<li><a href="https://github.com/BoBeenLee/environment-config-example/tree/node">https://github.com/BoBeenLee/environment-config-example/tree/node</a></li>
</ul>
</div><div class="Caption__Root-eSAclV ikwstD"><div class="Seperator__Root-jDoLGS ciZjWj"></div><div class="SocialLinks__Root-jSZdCn jNsTEZ Caption__SocialLinkBox-eHpFGZ kpJGQX"><button title="React prod, staging, dev 환경 설정하기" aria-label="twitter" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="35" height="35"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><div class="SocialLinks__Seperator-jaEcYQ beAchF"></div><button aria-label="facebook" class="react-share__ShareButton" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="35" height="35"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button></div></div></div></main><footer class="Layout__FooterBox-kWPHHf eoFKAx"><div class="Footer__Root-gZujhK jOTiqD"><div class="Footer__CopyrightBox-dJaEQU igGzNO">@ 2018</div><div class="Footer__ContactBox-fJuIuJ imHKUi"><div class="Footer__ContactColumn-huzhaG Footer__ContactColumnOne-iJRdWK klZXkn lbTHgz"><a href="https://cultist-tp.tistory.com/" target="_blank" class="Footer__ContactItemBox-erPsVA fqFAb"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" size="20" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg></a></div><div class="Footer__ContactColumn-huzhaG klZXkn"><a href="https://github.com/BoBeenLee" target="_blank" class="Footer__ContactItemBox-erPsVA fqFAb"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" size="20" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path></svg></a><a href="mailto:globaldev@naver.com" target="_blank" class="Footer__ContactItemBox-erPsVA fqFAb"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" size="20" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M21 8V7l-3 2-3-2v1l3 2 3-2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2zM8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1zm8-6h-8V6h8v6z"></path></svg></a></div></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"react-prod-staging-dev-환경-설정하기","frontmatter":{"title":"React prod, staging, dev 환경 설정하기","date":"2018-07-08","published":false,"tags":["React","React Native","Environment"]},"content":"\u003cp\u003eReact prod, staging, dev 환경 설정하기\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#adding-custom-environment-variables\"\u003ecrn\u003c/a\u003e, \u003ca href=\"https://movie.naver.com/movie/bi/mi/basic.nhn?code=115622\"\u003ecrna\u003c/a\u003e에서 외부 환경 설정을 추가하는 방법에 대해 다룬다.\nprod, dev환경 별 환경변수를 받으러면\ncrn같은 경우 기본적으로 \u003ca href=\"https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#what-other-env-files-can-be-used\"\u003e.env.local, .env.development, .env.production, .env.test\u003c/a\u003e을 제공해주는거 같고\ncrna는 각 환경에 따른 환경 설정을 하려면 \u003ca href=\"https://github.com/luggit/react-native-config\"\u003ereact native config\u003c/a\u003e나 \u003ca href=\"https://github.com/zetachang/react-native-dotenv\"\u003ereact native dotenv\u003c/a\u003e(.env만 사용가능함)를 이용할 수 있겠다.\u003c/p\u003e\n\u003cp\u003e만일 staging 환경을 추가하고 싶다라는 고민에서 기본적으로 제공하는 문서로는 다루기가 힘든다라는 것을 알고 다른 방안을 찾아보게 되었다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReact App\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/BoBeenLee/environment-config-example/blob/react/package.json\"\u003epackage.json\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n \"scripts\": {\n    \"start\": \"cp ./.env.dev ./.env \u0026#x26;\u0026#x26; react-scripts start\",\n    \"start:staging\": \"cp ./.env.staging ./.env \u0026#x26;\u0026#x26; react-scripts start\",\n    \"start:production\": \"cp ./.env.prod ./.env \u0026#x26;\u0026#x26; react-scripts start\",\n  }\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e스크립트 단에서 실행방법을 나누고 cp로 .env에 복사 후 각 환경별로 환경변수를 받고 실행하는 방법이다. \n내가 발견한 것들 중에 가장 깔끔한? 방법인거 같고 코드에 영향도도 가장 적고 관리하는데 가장 좋은 방법이라 생각한다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReact Native App\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/package.json\"\u003epackage.json\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e...\n\"scripts\": {\n    \"start\": \"./scripts/pre-build.sh development \u0026#x26;\u0026#x26; react-native-scripts start\",\n    \"start:staging\": \"./scripts/pre-build.sh staging \u0026#x26;\u0026#x26; react-native-scripts start\",\n    \"start:production\": \"./scripts/pre-build.sh production \u0026#x26;\u0026#x26; react-native-scripts start\",\n  },\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ereact native는 쉘 스크립트를 이용한 관리 방법이다.\n\u003ca href=\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/scripts/pre-build.sh\"\u003epre-build.sh\u003c/a\u003e는 환경별로 REACT_NATIVE_ENV키 값을 생성하여 \u003ca href=\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/config.json\"\u003econfig.json\u003c/a\u003e에 덮어씌운다.\n그리고 \u003ca href=\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/environment.js\"\u003eenvironment.js\u003c/a\u003e을 만들어 환경별 필요한 변수들을 세팅하여 전달한다.\u003c/p\u003e\n\u003ch3\u003edotenv나 config라이브러리를 사용하지 않았던 이유\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003ereact native config\n물론 getting started 보고 설정하면 원활히 동작할 수 있겠지만 관리 측면에서 react native config 호환도 유지해야한다는 점에 오히려 불편하다는 걸 알게되었다. 그런 이유로 사용하지 않았던거같다.\u003c/li\u003e\n\u003cli\u003edotenv\ncrn은 내부적으로 설정 되어있지만 한정적인 설정밖에 안되어 이용하기 불편했던거같다. (ex) .env.staging 설정) \nreact native dotenv는 \u003ca href=\"https://github.com/zetachang/react-native-dotenv\"\u003e.env만 사용가능\u003c/a\u003e하여 제외 대상이었다.\n물론 아래와 같은 식으로 환경변수를 .env에 전달 받는 방법도 있겠다.\n.env\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eREACT_ENV=$REACT_ENV\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003epackage.json\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\"scripts\": {\n\t\"start\": \"REACT_ENV=staging \u0026#x26;\u0026#x26; react-scripts start\"\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다만 react native에는 OS 환경에 환경변수 설정 후 appcenter환경에서 빌드 시엔 정상적으로 인식을 못했던거같다. ( react-native-dotenv의 이슈인지 정확히 모르겠지만 )\u003c/p\u003e\n\u003cp\u003e환경별 환경변수 설정은 다양한 방법이 존재하겠지만 아직까진 위와 같은 방법이 가장 심플한 경험을 받았다.\n각 환경별 환경변수 설정 Example을 공유한다.\u003c/p\u003e\n\u003cp\u003eReact\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/BoBeenLee/environment-config-example/tree/react\"\u003ehttps://github.com/BoBeenLee/environment-config-example/tree/react\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eReact Native\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/BoBeenLee/environment-config-example/tree/react-native\"\u003ehttps://github.com/BoBeenLee/environment-config-example/tree/react-native\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNode\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/BoBeenLee/environment-config-example/tree/node\"\u003ehttps://github.com/BoBeenLee/environment-config-example/tree/node\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"},"__N_SSG":true},"page":"/post/[id]","query":{"id":"react-prod-staging-dev-환경-설정하기"},"buildId":"JEE-K2PFB-3KKZ8PQQws7","runtimeConfig":{"staticFolder":"/public"},"isFallback":false,"gsp":true,"scriptLoader":[]}</script><script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-114339461-1', { 'optimize_id': 'GTM-M8CNZBG'});      
      </script></body></html>